<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>异兽内容管理后台</title>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <style>
    body { font-family: sans-serif; background: #f9f6f0; }
    .beast-list { max-width: 800px; margin: 2rem auto; }
    .beast-item { background: #fff; margin-bottom: 1rem; padding: 1rem; border-radius: 8px; box-shadow: 0 2px 8px #0001; display: flex; align-items: center; }
    .beast-img { width: 80px; height: 60px; object-fit: cover; border-radius: 6px; margin-right: 1rem; }
    .beast-info { flex: 1; }
    .beast-name { font-weight: bold; }
    .beast-desc { color: #666; font-size: 0.95rem; }
    .beast-time { color: #aaa; font-size: 0.85rem; }
    .delete-btn { background: #e74c3c; color: #fff; border: none; border-radius: 5px; padding: 0.4rem 1rem; cursor: pointer; }
    .delete-btn:hover { background: #c0392b; }
  </style>
</head>
<body>
  <h1 style="text-align:center;">异兽内容管理后台</h1>
  <div class="beast-list" id="beastList"></div>
  <script>
    // 用你的 firebaseConfig 替换
    const firebaseConfig = {
      apiKey: "AIzaSyA5Z5ieEbAcfQX0kxGSn9ldGXhzvAwx_8M",
      authDomain: "chat-294cc.firebaseapp.com",
      projectId: "chat-294cc",
      storageBucket: "chat-294cc.appspot.com",
      messagingSenderId: "913615304269",
      appId: "1:913615304269:web:0274ffaccb8e6b678e4e04",
      measurementId: "G-SJR9NDW86B"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // 加载所有内容
    async function loadBeasts() {
      const list = document.getElementById('beastList');
      list.innerHTML = '加载中...';
      const snap = await db.collection('beasts').orderBy('created', 'desc').get();
      list.innerHTML = '';
      snap.forEach(doc => {
        const data = doc.data();
        const div = document.createElement('div');
        div.className = 'beast-item';
        div.innerHTML = `
          <img class="beast-img" src="${data.image}" alt="${data.name}">
          <div class="beast-info">
            <div class="beast-name">${data.name}</div>
            <div class="beast-desc">${data.description}</div>
            <div class="beast-time">${data.created && data.created.toDate ? data.created.toDate().toLocaleString() : ''}</div>
          </div>
          <button class="delete-btn">删除</button>
        `;
        div.querySelector('.delete-btn').onclick = async () => {
          if (confirm('确定要删除这条内容吗？')) {
            await db.collection('beasts').doc(doc.id).delete();
            loadBeasts();
          }
        };
        list.appendChild(div);
      });
    }
    loadBeasts();
  </script>
</body>
</html>
